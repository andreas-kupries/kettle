
<html><head>
<title>kettle_dsl - Kettle - The Quick Brew System</title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.toc,UL.toc UL, UL.toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.section, LI.subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.requirements LI, UL.syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<! -- Generated from file '/home/aku/Projects/Kettle/kettle/embedded/www/doc/files/kettle_dsl.html' by tcllib/doctools with format 'html'
   -->
<! -- CVS: $Id$ kettle_dsl.n
   -->
<body><div class="doctools">
<hr> [
  <a href="../../toc.html">Main Table Of Contents</a>
| <a href="../toc.html">Table Of Contents</a>
| <a href="../../index.html">Keyword Index</a>
] <hr>
<h1 class="title">kettle_dsl(n) 0 doc &quot;Kettle - The Quick Brew System&quot;</h1>
<div id="name" class="section"><h2><a name="name">Name</a></h2>
<p>kettle_dsl - Kettle - Build Declarations</p>
</div>
<div id="toc" class="section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>
<li class="section"><a href="#synopsis">Synopsis</a></li>
<li class="section"><a href="#section1">Description</a></li>
<li class="section"><a href="#section2">License</a></li>
<li class="section"><a href="#section3">Bugs, Ideas, Feedback</a></li>
<li class="section"><a href="#keywords">Keywords</a></li>
<li class="section"><a href="#category">Category</a></li>
</ul>
</div>
<div id="synopsis" class="section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="synopsis">
<ul class="requirements">
<li>package require <b class="pkgname">Tcl 8.5</b></li>
</ul>
<ul class="syntax">
<li><a href="#1"><b class="cmd">kettle tclapp</b> <i class="arg">path</i></a></li>
<li><a href="#2"><b class="cmd">kettle depends-on</b> <i class="arg">path</i>...</a></li>
<li><a href="#3"><b class="cmd">kettle doc</b> <span class="opt">?<i class="arg">docroot</i>?</span></a></li>
<li><a href="#4"><b class="cmd">kettle doc-destination</b> <i class="arg">path</i></a></li>
<li><a href="#5"><b class="cmd">kettle figures</b> <span class="opt">?<i class="arg">figroot</i>?</span></a></li>
</ul>
</div>
</div>
<div id="section1" class="section"><h2><a name="section1">Description</a></h2>
<p>Welcome to Kettle, a set of packages providing support for writing
build code for Tcl packages.</p>
<p>Please read the document <i class="term"><a href="kettle_intro.html">Kettle - Introduction to Kettle</a></i>,
if you have not done so already, to get an overview of the whole system.</p>
<dl class="definitions">
    
    
<dt><a name="1"><b class="cmd">kettle tclapp</b> <i class="arg">path</i></a></dt>
<dd><p>This command declares the presence of a Tcl script application found 
at the <i class="arg">path</i> under the package source directory.</p>
<p>If the specified application is found the command will define
two recipes to install and uninstall this application, namely:</p>
<dl class="definitions">
<dt><b class="const">install-app-<i class="arg">path</i></b></dt>
<dd></dd>
<dt><b class="const">uninstall-app-<i class="arg">path</i></b></dt>
<dd></dd>
</dl>
<p>It will further extend the recipes</p>
<dl class="definitions">
<dt><b class="const">install-tcl-applications</b></dt>
<dd></dd>
<dt><b class="const">install-applications</b></dt>
<dd></dd>
<dt><b class="const">install</b></dt>
<dd></dd>
<dt><b class="const">uninstall-tcl-applications</b></dt>
<dd></dd>
<dt><b class="const">uninstall-applications</b></dt>
<dd></dd>
<dt><b class="const">uninstall</b></dt>
<dd></dd>
</dl>
<p>This enables the package builder to (un)install the application as
part of various groups.</p>
<p>Applications are installed into the application bin/ directory
(--bin-dir, despite technically not being binary files).</p>
<dl class="options">
<dt><b class="option">--bin-dir</b> path</dt>
<dd><p>This configuration option specifies the path to the directory
applications (binary and script) will be installed into.</p>
<p>The default value is the directory of the <b class="syscmd">tclsh</b> used
to run the <b class="syscmd"><a href="kettle.html">kettle</a></b> application.</p>
<p>If the option <b class="option">--exec-prefix</b> is modified the default
value changes to &quot;<b class="file"><b class="variable">--exec-prefix</b>/bin</b>&quot;.</p></dd>
</dl></dd>
<dt><a name="2"><b class="cmd">kettle depends-on</b> <i class="arg">path</i>...</a></dt>
<dd><p>This command declares that the current sources depend on the packages
in the specified directories. These are best specified as relative
directories and most useful in package bundles where multiple
dependent packages are managed in a single source repository.</p>
<p>The arguments can be paths to files too. In that case the files
are assumed to be the build declaration files of the required packages
in question. In case of a directory path kettle will search for the
build declaration file it needs.
This information is currently only used by the package-specific
&quot;install&quot; and &quot;debug&quot; recipes generated by the kettle commands
<b class="cmd">kettle tcl</b> and <b class="cmd">kettle critcl</b>.</p></dd>
<dt><a name="3"><b class="cmd">kettle doc</b> <span class="opt">?<i class="arg">docroot</i>?</span></a></dt>
<dd><p>This command declares the presence of <b class="package">doctools</b>-based
documentation files under the directory <i class="arg">docroot</i>, which is a
path relative to the source directory we are in.</p>
<p>If not specified <i class="arg">docroot</i> defaults to &quot;<b class="file">doc</b>&quot;.</p>
<p>If documentation files are found the command will define the
recipe &quot;doc&quot; which, when invoked, will convert the documentation into
HTML and nroff and save the result of that conversion into the
directory specified by <b class="cmd">kettle doc-destination</b> (see below) or
<b class="syscmd"><a href="kettle.html">kettle</a></b>'s option <b class="option">--with-doc-destination</b>. The default
for this is &quot;<b class="file">embedded</b>&quot;.</p>
<p>It will further define the recipes</p>
<dl class="definitions">
<dt><b class="const">install-doc-html</b></dt>
<dd></dd>
<dt><b class="const">install-doc-manpages</b></dt>
<dd></dd>
<dt><b class="const">uninstall-doc-html</b></dt>
<dd></dd>
<dt><b class="const">uninstall-doc-manpages</b></dt>
<dd></dd>
</dl>
<p>and extend the recipes</p>
<dl class="definitions">
<dt><b class="const">install-doc</b></dt>
<dd></dd>
<dt><b class="const">install</b></dt>
<dd></dd>
<dt><b class="const">uninstall-doc</b></dt>
<dd></dd>
<dt><b class="const">uninstall</b></dt>
<dd></dd>
</dl>
<p>This enables the package builder to (un)install the documentation
whole or in part.
The installation of the documentation is influenced by the two
following options:</p>
<dl class="options">
<dt><b class="option">--html-dir</b> path</dt>
<dd><p>This configuration option specifies the path to the directory package
documentation in HTML format will be installed into.</p>
<p>The default value is &quot;<b class="file"><b class="variable">--prefix</b>/html</b>&quot;.</p></dd>
<dt><b class="option">--man-dir</b> path</dt>
<dd><p>This configuration option specifies the path to the directory package
documentation (manpages, in *roff format) will be installed into.</p>
<p>The default value is &quot;<b class="file"><b class="variable">--prefix</b>/man</b>&quot;.</p></dd>
</dl>
<p>Another relevant option is</p>
<dl class="options">
<dt><b class="option">--with-doc-destination</b> path</dt>
<dd><p>This configuration option specifies the path to the directory the
generated documentation should be placed into for the documentation
installa recipes to pick up from.</p>
<p>This should be a relative path, which will interpreted relative
to the package source directory.</p>
<p>The default value is &quot;<b class="file">embedded</b>&quot;.</p>
<p>A build declaration file can override this default with the
<b class="cmd">kettle doc-destination</b> command.</p></dd>
</dl>
<p>The documentation in the install recipes is taken from the
	doc-destination directory in the package sources (see recipe
	&quot;doc&quot; above).</p>
<p>Now for various important notes, limitations, etc.:</p>
<ol class="enumerated">
<li><p>This command is run for effect only once, even if invoked
	multiple times. First invocation wins.</p></li>
<li><p>This command is run implicitly by <b class="cmd">kettle tcl</b> and
	<b class="cmd">kettle critcl3</b>.</p></li>
<li><p>The previous two items together mean that any non-standard
	settings, be it documentation root or destination must come
	before these commands, if they are used.</p></li>
<li><p>Documentation files are recognized by containing any of the
	markers</p>
<ul class="itemized">
	
<li><p>&quot;<b class="const">[manpage_begin</b>&quot;</p></li>
<li><p>&quot;<b class="const">--- doctools ---</b>&quot;</p></li>
<li><p>&quot;<b class="const">tcl.tk//DSL doctools//EN//</b>&quot;</p></li>
</ul>
<p>in their first 1024 characters. Possible documentation files
	are rejected should they contain any of the anti-markers</p>
<ul class="itemized">
	
<li><p>&quot;<b class="const">--- !doctools ---</b>&quot;</p></li>
<li><p>&quot;<b class="const">!tcl.tk//DSL doctools//EN//</b>&quot;</p></li>
</ul>
<p>in their first 1024 characters. This last is necessary as
	doctools include file feature allows the actual document
	content to start in an include file which cannot operate
	without being includes from a master file configuring it.</p></li>
<li><p>The &quot;doc&quot; recipe uses the <b class="syscmd">dtplite</b> application to
	perform the various conversions. It will fail if this
	application cannot be found on the <b class="variable">PATH</b>.</p>
<dl class="options">
<dt><b class="option">--with-dtplite</b> path</dt>
<dd><p>This configuration option specifies the path to the tool
<b class="syscmd">dtplite</b> for doctools-based documentation processing.</p>
<p>The default value is the path to the first of
	&quot;<b class="file">dtplite</b>&quot;,
	&quot;<b class="file">dtplite.kit</b>&quot;,
	&quot;<b class="file">dtplite.tcl</b>&quot;, and
	&quot;<b class="file">dtplite.exe</b>&quot;
found on the <b class="variable">PATH</b>.</p></dd>
</dl>
</li>
<li><p>This command calls &quot;<b class="cmd">kettle figures</b> <i class="arg">docroot</i>/figures&quot;
	to search for and handle diagrams. Any non-standard settings
	for diagrams must be declared before <b class="cmd">kettle doc</b> itself
	is used.</p></li>
</ol></dd>
<dt><a name="4"><b class="cmd">kettle doc-destination</b> <i class="arg">path</i></a></dt>
<dd><p>The &quot;doc&quot; recipe generated by the <b class="cmd">kettle doc</b> command above
saves its conversion results by default in the sub-directory
&quot;<b class="file">embedded</b>&quot; of the package/application source directory.</p>
<p>This command is for the general adjustment of this default
	destination for the package/application.</p>
<p>It can also be adjusted on a per-run basis, through the option</p>
<dl class="options">
<dt><b class="option">--with-doc-destination</b> path</dt>
<dd><p>This configuration option specifies the path to the directory the
generated documentation should be placed into for the documentation
installa recipes to pick up from.</p>
<p>This should be a relative path, which will interpreted relative
to the package source directory.</p>
<p>The default value is &quot;<b class="file">embedded</b>&quot;.</p>
<p>A build declaration file can override this default with the
<b class="cmd">kettle doc-destination</b> command.</p></dd>
</dl></dd>
<dt><a name="5"><b class="cmd">kettle figures</b> <span class="opt">?<i class="arg">figroot</i>?</span></a></dt>
<dd><p>This command declares the presence of <b class="package">diagram</b>-based figures
under the directory <i class="arg">figroot</i>, which is a path relative to the
source directory we are in.</p>
<p>If not specified <i class="arg">figroot</i> defaults to &quot;<b class="file">doc/figures</b>&quot;.</p>
<p>If figures are found the command will define two recipes,
&quot;figures&quot; and &quot;show-figures&quot;. When invoked the first will convert the
figures into raster images in PNG format and save them as siblings to
their source files. The second will launch a <b class="package">Tk</b>-based GUI
rendering the figures to a canvas.</p>
<p>Now for various important notes, limitations, etc.:</p>
<ol class="enumerated">
<li><p>This command is run for effect only once, even if invoked
	multiple times. First invocation wins.</p></li>
<li><p>This command is run implicitly by <b class="cmd">kettle doc</b>, using
	its <i class="arg">docroot</i> as basis for <i class="arg">figroot</i>, i.e.
	&quot;<b class="file"><i class="arg">docroot</i>/figures</b>&quot;.</p></li>
<li><p>The previous two items together mean that any non-standard
	settings for the figure root must come before
	<b class="cmd">kettle doc</b>, if that command is used, directly, or
	indirectly (like through <b class="cmd">kettle tcl</b>, for example).</p></li>
<li><p>Diagram files are recognized by containing the marker</p>
<ul class="itemized">
	
<li><p>&quot;<b class="const">tcl.tk//DSL diagram//EN//</b>&quot;</p></li>
</ul>
<p>in their first 1024 characters.</p></li>
<li><p>The two recipes use the tklib <b class="syscmd">dia</b> application to
	perform the conversion and GUI display. They will fail if
	this application cannot be found on the <b class="variable">PATH</b>.</p></li>
</ol></dd>
</dl>
</div>
<div id="section2" class="section"><h2><a name="section2">License</a></h2>
<p>This package, written by Andreas Kupries, is BSD licensed.</p>
</div>
<div id="section3" class="section"><h2><a name="section3">Bugs, Ideas, Feedback</a></h2>
<p>This document, and the package it describes, will undoubtedly contain
bugs and other problems.
Please report such at the
<a href="https://chiselapp.com/user/andreas_kupries/repository/Kettle/index">Kettle Tracker</a>.
Please also report any ideas for enhancements you may have for either
package and/or documentation.</p>
</div>
<div id="keywords" class="section"><h2><a name="keywords">Keywords</a></h2>
<p><a href="../../index.html#key0">build tea</a></p>
</div>
<div id="category" class="section"><h2><a name="category">Category</a></h2>
<p>Build support</p>
</div>
</div></body></html>

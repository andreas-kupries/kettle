
<html><head>
<title>kettle_dsl - Kettle - The Quick Brew System</title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.toc,UL.toc UL, UL.toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.section, LI.subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.requirements LI, UL.syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<! -- Generated from file '/net/nas/data/andreask/Dev/Kettle/kettle/embedded/www/doc/files/kettle_dsl.html' by tcllib/doctools with format 'html'
   -->
<! -- CVS: $Id$ kettle_dsl.n
   -->
<body><div class="doctools">
<hr> [
   <a href="../../../../../../home">Home</a>
| <a href="../../toc.html">Main Table Of Contents</a>
| <a href="../toc.html">Table Of Contents</a>
| <a href="../../index.html">Keyword Index</a>
 ] <hr>
<h1 class="title">kettle_dsl(n) 1 doc &quot;Kettle - The Quick Brew System&quot;</h1>
<div id="name" class="section"><h2><a name="name">Name</a></h2>
<p>kettle_dsl - Kettle - Build Declarations</p>
</div>
<div id="toc" class="section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>
<li class="section"><a href="#synopsis">Synopsis</a></li>
<li class="section"><a href="#section1">Description</a></li>
<li class="section"><a href="#section2">Build commands</a></li>
<li class="section"><a href="#section3">License</a></li>
<li class="section"><a href="#section4">Bugs, Ideas, Feedback</a></li>
<li class="section"><a href="#keywords">Keywords</a></li>
<li class="section"><a href="#category">Category</a></li>
</ul>
</div>
<div id="synopsis" class="section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="synopsis">
<ul class="requirements">
<li>package require <b class="pkgname">Tcl 8.5</b></li>
</ul>
<ul class="syntax">
<li><a href="#1"><b class="cmd">kettle tcl</b></a></li>
<li><a href="#2"><b class="cmd">kettle tclapp</b> <i class="arg">path</i></a></li>
<li><a href="#3"><b class="cmd">kettle critcl3</b></a></li>
<li><a href="#4"><b class="cmd">kettle depends-on</b> <i class="arg">path</i>...</a></li>
<li><a href="#5"><b class="cmd">kettle doc-destination</b> <i class="arg">path</i></a></li>
<li><a href="#6"><b class="cmd">kettle doc</b> <span class="opt">?<i class="arg">docroot</i>?</span></a></li>
<li><a href="#7"><b class="cmd">kettle figures</b> <span class="opt">?<i class="arg">figroot</i>?</span></a></li>
<li><a href="#8"><b class="cmd">kettle gh-pages</b></a></li>
<li><a href="#9"><b class="cmd">kettle testsuite</b> <span class="opt">?<i class="arg">testroot</i>?</span></a></li>
</ul>
</div>
</div>
<div id="section1" class="section"><h2><a name="section1">Description</a></h2>
<p>Welcome to Kettle, a set of packages providing support for writing
build code for Tcl packages.</p>
<p>Please read the document <i class="term"><a href="kettle_intro.html">Kettle - Introduction to Kettle</a></i>,
if you have not done so already, to get an overview of the whole system.</p>
<p>Here we document the build (declaration) commands available to a user
of kettle, i.e. a package developer using (or wishing to use) kettle
as the build system for their code.</p>
<p>These commands are provided by the kettle core, as shown in the
archtectural diagram below.</p>
<p><img alt="arch_core" src="../../image/arch_core.png"></p>
</div>
<div id="section2" class="section"><h2><a name="section2">Build commands</a></h2>
<dl class="definitions">
    
<dt><a name="1"><b class="cmd">kettle tcl</b></a></dt>
<dd><p>This command declares the presence of one or more Tcl packages in the
package source directory.</p>
<p>The package source directory is scanned to locate
them. Packages are detected by finding a marker (Tcl command) of the
form</p>
<pre class="example">
    package provide NAME VERSION
</pre>
<p>in a file, where both <b class="variable">NAME</b> and <b class="variable">VERSION</b> must be literal
strings, not commands, nor variable references. It is best recognized
when found alone on its line.
Note that files containing an <em>anti-marker</em> of the form</p>
<pre class="example">
    package require critcl
</pre>
<p>are rejected as Tcl packages. Use the command <b class="cmd">kettle critcl3</b>
to detect such packages, mixing Tcl and C.
In each accepted package file the command further looks for and
recognizes embedded pragmas of the form</p>
<pre class="example"># @owns: PATH</pre>
<p>which provides kettle with information about files belonging to the
same package without directly providing it. This can be data files, or
other Tcl files sourced by the main package file.</p>
<p>For each detected package <b class="variable">P</b> two recipes are defined, to
install and uninstall this package, namely:</p>
<dl class="definitions">
<dt><b class="const">install-package-<b class="variable">P</b></b></dt>
<dd></dd>
<dt><b class="const">uninstall-package-<b class="variable">P</b></b></dt>
<dd></dd>
</dl>
<p>The command further extends the recipes</p>
<dl class="definitions">
<dt><b class="const">install-tcl-packages</b></dt>
<dd></dd>
<dt><b class="const">install-packages</b></dt>
<dd></dd>
<dt><b class="const">install</b></dt>
<dd></dd>
<dt><b class="const">uninstall-tcl-packages</b></dt>
<dd></dd>
<dt><b class="const">uninstall-packages</b></dt>
<dd></dd>
<dt><b class="const">uninstall</b></dt>
<dd></dd>
</dl>
<p>generating a recipe tree matching</p>
<pre class="example">
  install
  -&gt; install-packages
     -&gt; install-tcl-packages
        -&gt; install-app-$path
  uninstall
  -&gt; uninstall-packages
     -&gt; uninstall-tcl-packages
        -&gt; uninstall-app-$path
</pre>
<p>The extended recipes may be created by this process. As other
declarations create similar trees these get merged together, enabling
a user to install parts of the sources at various levels of specifity,
from just a specific package up to all and sundry.</p>
<p>Tcl packages are installed into the directory specified by
option <b class="option">--lib-dir</b> despite technically not being binary files.</p>
<dl class="options">
<dt><b class="option">--lib-dir</b> path</dt>
<dd><p>This configuration option specifies the path to the directory packages
(binary and script) will be installed into.</p>
<p>The default value is the [<b class="cmd">info library</b>] directory
of the <b class="syscmd">tclsh</b> used to run the <b class="syscmd"><a href="kettle.html">kettle</a></b> application.</p>
<p>If the option <b class="option">--exec-prefix</b> is modified the default
value changes to &quot;<b class="file"><b class="variable">--exec-prefix</b>/lib</b>&quot;.</p></dd>
</dl>
<p>To simplify usage the command heuristically detects
documentation and testsuites by means of internally calling the
commands <b class="cmd">kettle doc</b> and <b class="cmd">kettle testsuite</b> with default
path arguments (&quot;<b class="file">doc</b>&quot; and &quot;<b class="file">tests</b>&quot; respectively).</p>
<p>If documentation and/or testsuite are placed in non-standard
locations these commands have to be run before <b class="cmd">kettle tcl</b>,
with the proper paths.</p>
<p>If dependencies have been specified, via
<b class="cmd">kettle depends-on</b>, the package specific install and debug
recipes will recusively invoke install or debug on them before
building the package itself.</p></dd>
<dt><a name="2"><b class="cmd">kettle tclapp</b> <i class="arg">path</i></a></dt>
<dd><p>This command declares the presence of a Tcl script application found 
at the <i class="arg">path</i> under the package source directory.</p>
<p>If the specified application is found the command will define
two recipes to install and uninstall this application, namely:</p>
<dl class="definitions">
<dt><b class="const">install-app-<i class="arg">path</i></b></dt>
<dd></dd>
<dt><b class="const">uninstall-app-<i class="arg">path</i></b></dt>
<dd></dd>
</dl>
<p>It will further extend the recipes</p>
<dl class="definitions">
<dt><b class="const">install-tcl-applications</b></dt>
<dd></dd>
<dt><b class="const">install-applications</b></dt>
<dd></dd>
<dt><b class="const">install</b></dt>
<dd></dd>
<dt><b class="const">uninstall-tcl-applications</b></dt>
<dd></dd>
<dt><b class="const">uninstall-applications</b></dt>
<dd></dd>
<dt><b class="const">uninstall</b></dt>
<dd></dd>
</dl>
<p>generating a recipe tree matching</p>
<pre class="example">
  install
  -&gt; install-applications
     -&gt; install-tcl-applications
        -&gt; install-app-$path
  uninstall
  -&gt; uninstall-applications
     -&gt; uninstall-tcl-applications
        -&gt; uninstall-app-$path
</pre>
<p>The extended recipes may be created by this process. As other
declarations create similar trees these get merged together, enabling
a user to install parts of the sources at various levels of specifity,
from just a specific application up to all and sundry.</p>
<p>Script applications are installed into the directory specified
by option <b class="option">--bin-dir</b> despite technically not being binary
files.</p>
<dl class="options">
<dt><b class="option">--bin-dir</b> path</dt>
<dd><p>This configuration option specifies the path to the directory
applications (binary and script) will be installed into.</p>
<p>The default value is the directory of the <b class="syscmd">tclsh</b> used
to run the <b class="syscmd"><a href="kettle.html">kettle</a></b> application.</p>
<p>If the option <b class="option">--exec-prefix</b> is modified the default
value changes to &quot;<b class="file"><b class="variable">--exec-prefix</b>/bin</b>&quot;.</p></dd>
</dl></dd>
<dt><a name="3"><b class="cmd">kettle critcl3</b></a></dt>
<dd><p>This command declares the presence of one or more critcl-based Tcl
packages in the package source directory, mixing C and Tcl.</p>
<p>The package source directory is scanned to locate
them. Packages are detected by finding two markers (Tcl commands) in
the file. These markers are of the form</p>
<pre class="example">
    package provide NAME VERSION
</pre>
<p>and</p>
<pre class="example">
    package require critcl
</pre>
<p>Both <b class="variable">NAME</b> and <b class="variable">VERSION</b> must be literal strings, not
commands, nor variable references. They are best recognized when found
alone on their respective lines.</p>
<p>For each detected package <b class="variable">P</b> three recipes are defined, to
install and uninstall this package. Installation comes in two
variants, regular and debug:</p>
<dl class="definitions">
<dt><b class="const">install-package-<b class="variable">P</b></b></dt>
<dd></dd>
<dt><b class="const">debug-package-<b class="variable">P</b></b></dt>
<dd></dd>
<dt><b class="const">uninstall-package-<b class="variable">P</b></b></dt>
<dd></dd>
</dl>
<p>The command further extends the recipes</p>
<dl class="definitions">
<dt><b class="const">install-binary-packages</b></dt>
<dd></dd>
<dt><b class="const">install-packages</b></dt>
<dd></dd>
<dt><b class="const">install</b></dt>
<dd></dd>
<dt><b class="const">debug-binary-packages</b></dt>
<dd></dd>
<dt><b class="const">debug-packages</b></dt>
<dd></dd>
<dt><b class="const">debug</b></dt>
<dd></dd>
<dt><b class="const">uninstall-binary-packages</b></dt>
<dd></dd>
<dt><b class="const">uninstall-packages</b></dt>
<dd></dd>
<dt><b class="const">uninstall</b></dt>
<dd></dd>
</dl>
<p>generating a recipe tree matching</p>
<pre class="example">
  install
  -&gt; install-packages
     -&gt; install-binary-packages
        -&gt; install-app-$path
  debug
  -&gt; debug-packages
     -&gt; debug-binary-packages
        -&gt; debug-app-$path
  uninstall
  -&gt; uninstall-packages
     -&gt; uninstall-binary-packages
        -&gt; uninstall-app-$path
</pre>
<p>The extended recipes may be created by this process. As other
declarations create similar trees these get merged together, enabling
a user to install parts of the sources at various levels of specifity,
from just a specific package up to all and sundry.</p>
<p>Critcl-based packages are installed into the directory
specified by option <b class="option">--lib-dir</b>.
Critcl's choice of the target configuration to build for can be
overrriden via option <b class="option">--target</b>.
Kettle's choice of which critcl application to use cane overriden by
option <b class="option">--with-critcl3</b>, except if kettle found a
<b class="package">critcl</b> package and runs everything itself instead of
invoking critcl child processes.</p>
<dl class="options">
<dt><b class="option">--lib-dir</b> path</dt>
<dd><p>This configuration option specifies the path to the directory packages
(binary and script) will be installed into.</p>
<p>The default value is the [<b class="cmd">info library</b>] directory
of the <b class="syscmd">tclsh</b> used to run the <b class="syscmd"><a href="kettle.html">kettle</a></b> application.</p>
<p>If the option <b class="option">--exec-prefix</b> is modified the default
value changes to &quot;<b class="file"><b class="variable">--exec-prefix</b>/lib</b>&quot;.</p></dd>
<dt><b class="option">--target</b> string</dt>
<dd><p>The value of this option is the target name <b class="syscmd">critcl</b> should use
to build C code.</p>
<p>The default value is the empty string, leaving the choice of
target to <b class="syscmd">critcl</b> itself.</p></dd>
<dt><b class="option">--with-critcl3</b> path</dt>
<dd><p>This configuration option specifies the path to the tool
<b class="syscmd">critcl3</b> for the compilation and installation of critcl-based
C code.</p>
<p>The default value is the path to the first of</p>
<ol class="enumerated">
<li><p>&quot;<b class="file">critcl3</b>&quot;,</p></li>
<li><p>&quot;<b class="file">critcl3.kit</b>&quot;,</p></li>
<li><p>&quot;<b class="file">critcl3.tcl</b>&quot;,</p></li>
<li><p>&quot;<b class="file">critcl3.exe</b>&quot;,</p></li>
<li><p>&quot;<b class="file">critcl</b>&quot;,</p></li>
<li><p>&quot;<b class="file">critcl.kit</b>&quot;,</p></li>
<li><p>&quot;<b class="file">critcl.tcl</b>&quot;, and</p></li>
<li><p>&quot;<b class="file">critcl.exe</b>&quot;</p></li>
</ol>
<p>found on the <b class="variable">PATH</b>. None of these matter however should the
system find the package <b class="package">critcl</b> version 3 or higher among the
packages known to the <b class="syscmd">tclsh</b> running the <b class="syscmd"><a href="kettle.html">kettle</a></b>
application. In that case kettle will run everything in itself,
without invoking critcl child processes.</p></dd>
</dl>
<p>To simplify usage the command heuristically detects
documentation and testsuites by means of internally calling the
commands <b class="cmd">kettle doc</b> and <b class="cmd">kettle testsuite</b> with default
path arguments (&quot;<b class="file">doc</b>&quot; and &quot;<b class="file">tests</b>&quot; respectively).</p>
<p>If documentation and/or testsuite are placed in non-standard
locations these commands have to be run before <b class="cmd">kettle critcl3</b>,
with the proper paths.</p>
<p>If dependencies have been specified, via
<b class="cmd">kettle depends-on</b>, the package specific install and debug
recipes will recusively invoke install or debug on them before
building the package itself.</p></dd>
<dt><a name="4"><b class="cmd">kettle depends-on</b> <i class="arg">path</i>...</a></dt>
<dd><p>This command declares that the current sources depend on the packages
in the specified directories. These are best specified as relative
directories and most useful in package bundles where multiple
dependent packages are managed in a single source repository.</p>
<p>The arguments can be paths to files too. In that case the files
are assumed to be the build declaration files of the required packages
in question. In case of a directory path kettle will search for the
build declaration file it needs.
This information is currently only used by the package-specific
&quot;install&quot; and &quot;debug&quot; recipes generated by the kettle commands
<b class="cmd">kettle tcl</b> and <b class="cmd">kettle critcl</b>.</p></dd>
<dt><a name="5"><b class="cmd">kettle doc-destination</b> <i class="arg">path</i></a></dt>
<dd><p>The &quot;doc&quot; recipe generated by the <b class="cmd">kettle doc</b> command (see
below) saves the conversion results into the sub-directory specified
by option <b class="option">--with-doc-destination</b>.</p>
<p>This command declares that the results should be put into the
specified non-standard <i class="arg">path</i> instead of the default of
&quot;<b class="file">embedded</b>&quot;.
To take effect it has to be run <em>before</em> <b class="cmd">kettle doc</b> is
run.
<em>Note</em> that the user is still able to override with by setting
<b class="option">--with-doc-destination</b> on the command line.</p>
<dl class="options">
<dt><b class="option">--with-doc-destination</b> path</dt>
<dd><p>This configuration option specifies the path to the directory the
generated documentation should be placed into for the documentation
installa recipes to pick up from.</p>
<p>This should be a relative path, which will interpreted relative
to the package source directory.</p>
<p>The default value is &quot;<b class="file">embedded</b>&quot;.</p>
<p>A build declaration file can override this default with the
<b class="cmd">kettle doc-destination</b> command.</p></dd>
</dl></dd>
<dt><a name="6"><b class="cmd">kettle doc</b> <span class="opt">?<i class="arg">docroot</i>?</span></a></dt>
<dd><p>This command declares the presence of <b class="package">doctools</b>-based
documentation files under the directory <i class="arg">docroot</i>, which is a path
relative to the source directory.</p>
<p>If not specified <i class="arg">docroot</i> defaults to &quot;<b class="file">doc</b>&quot;.</p>
<p>While this command can be invoked multiple times, only the
first invokation will have an effect. Every invokation after that is
ignored.
The commands <b class="cmd">kettle tcl</b>, <b class="cmd">kettle critcl3</b>, and
<b class="cmd">kettle gh-pages</b> run this command implicitly, with the default
paths.
This means that if documentation is stored in a non-standard location
<b class="cmd">kettle doc</b> must be run explicitly before them, with the proper path.</p>
<p>The package documentation directory is scanned to locate the
documentation files. They are recognized by containing any of the
marker strings</p>
<ul class="itemized">
<li><p>&quot;<b class="const">[manpage_begin</b>&quot;</p></li>
<li><p>&quot;<b class="const">--- doctools ---</b>&quot;</p></li>
<li><p>&quot;<b class="const">tcl.tk//DSL doctools//EN//</b>&quot;</p></li>
</ul>
<p>in their first 1024 characters. Possible documentation files are
rejected should they contain any of the anti-markers</p>
<ul class="itemized">
<li><p>&quot;<b class="const">--- !doctools ---</b>&quot;</p></li>
<li><p>&quot;<b class="const">!tcl.tk//DSL doctools//EN//</b>&quot;</p></li>
</ul>
<p>in their first 1024 characters. This last is necessary as doctools
include file feature allows the actual document content to start in an
include file which cannot operate without being includes from a master
file configuring it.</p>
<p>When documentation files are found the command will define
recipes to convert the documentation into manpages and HTML files,
plus recipes install the conversion results. The conversion results
themselves are stored as specified by <b class="cmd">kettle doc-destination</b>
(see above) and associated options.</p>
<dl class="definitions">
<dt><b class="const">doc</b></dt>
<dd></dd>
<dt><b class="const">install-doc-html</b></dt>
<dd></dd>
<dt><b class="const">install-doc-manpages</b></dt>
<dd></dd>
<dt><b class="const">uninstall-doc-html</b></dt>
<dd></dd>
<dt><b class="const">uninstall-doc-manpages</b></dt>
<dd></dd>
</dl>
<p>The command further extends the recipes</p>
<dl class="definitions">
<dt><b class="const">install-doc</b></dt>
<dd></dd>
<dt><b class="const">install</b></dt>
<dd></dd>
<dt><b class="const">uninstall-doc</b></dt>
<dd></dd>
<dt><b class="const">uninstall</b></dt>
<dd></dd>
</dl>
<p>generating a recipe tree matching</p>
<pre class="example">
  install
  -&gt; install-doc
     -&gt; install-doc-html
     -&gt; install-doc-manpages
  uninstall
  -&gt; uninstall-doc
     -&gt; uninstall-doc-html
     -&gt; uninstall-doc-manpages
</pre>
<p>The extended recipes may be created by this process. As other
declarations create similar trees these get merged together, enabling
a user to install parts of the sources at various levels of specifity,
from just a specific type of documentation up to all and sundry.</p>
<p>HTML documentation is stored under the directory specified by
option <b class="option">--html-dir</b>.
Manpages are stored under the directory specified by
option <b class="option">--man-dir</b>.
The &quot;doc&quot; recipe uses the <b class="syscmd">dtplite</b> application to perform the
various conversions.</p>
<dl class="options">
<dt><b class="option">--html-dir</b> path</dt>
<dd><p>This configuration option specifies the path to the directory package
documentation in HTML format will be installed into.</p>
<p>The default value is &quot;<b class="file"><b class="variable">--prefix</b>/html</b>&quot;.</p></dd>
<dt><b class="option">--man-dir</b> path</dt>
<dd><p>This configuration option specifies the path to the directory package
documentation (manpages, in *roff format) will be installed into.</p>
<p>The default value is &quot;<b class="file"><b class="variable">--prefix</b>/man</b>&quot;.</p></dd>
<dt><b class="option">--with-dtplite</b> path</dt>
<dd><p>This configuration option specifies the path to the tool
<b class="syscmd">dtplite</b> for doctools-based documentation processing.</p>
<p>The default value is the path to the first of
	&quot;<b class="file">dtplite</b>&quot;,
	&quot;<b class="file">dtplite.kit</b>&quot;,
	&quot;<b class="file">dtplite.tcl</b>&quot;, and
	&quot;<b class="file">dtplite.exe</b>&quot;
found on the <b class="variable">PATH</b>.</p></dd>
</dl>
<p>To simplify usage the command heuristically detects
tklib/diagram based figures by means of internally calling the command
<b class="cmd">kettle figures</b> with default path arguments
(&quot;<b class="file"><b class="variable">doc-sources</b>/figures}</b>&quot;.</p>
<p>If the figures are placed in a non-standard location this
command has to be run before <b class="cmd">kettle doc</b>, with the proper
paths.</p></dd>
<dt><a name="7"><b class="cmd">kettle figures</b> <span class="opt">?<i class="arg">figroot</i>?</span></a></dt>
<dd><p>This command declares the presence of <b class="package">diagram</b>-based figures
under the directory <i class="arg">figroot</i>, which is a path relative to the
source directory.</p>
<p>If not specified <i class="arg">figroot</i> defaults to &quot;<b class="file">doc/figures</b>&quot;.</p>
<p>While this command can be invoked multiple times, only the
first invokation will have an effect. Every invokation after that is
ignored.
The command <b class="cmd">kettle doc</b> (and indirectly <b class="cmd">kettle tcl</b> and
<b class="cmd">kettle critcl3</b>) runs this command implicitly, with the default
paths.
This means that if diagrams are stored in a non-standard location
<b class="cmd">kettle figures</b> must be run explicitly before them, with the
proper path.</p>
<p>The package diagram directory is scanned to locate the diagram
files. They are recognized by containing the marker string</p>
<ul class="itemized">
<li><p>&quot;<b class="const">tcl.tk//DSL diagram//EN//</b>&quot;</p></li>
</ul>
<p>in their first 1024 characters.</p>
<p>When diagram files are found the command will define recipes to
convert the diagrams into PNG raster images (saved as siblings to
their source files), and to render the diagrams on a Tk canvas.</p>
<dl class="definitions">
<dt><b class="const">figures</b></dt>
<dd></dd>
<dt><b class="const">show-figures</b></dt>
<dd></dd>
</dl>
<p>The recipes use the <b class="syscmd">dia</b> application (of <b class="package">tklib</b>)
to perform the conversions, and GUI rendering.</p>
<dl class="options">
<dt><b class="option">--with-dia</b> path</dt>
<dd><p>This configuration option specifies the path to the tool
<b class="syscmd">dia</b> for tklib/diagram-based diagram processing.</p>
<p>The default value is the path to the first of
	&quot;<b class="file">dia</b>&quot;,
	&quot;<b class="file">dia.kit</b>&quot;,
	&quot;<b class="file">dia.tcl</b>&quot;, and
	&quot;<b class="file">dia.exe</b>&quot;
found on the <b class="variable">PATH</b>.</p></dd>
</dl></dd>
<dt><a name="8"><b class="cmd">kettle gh-pages</b></a></dt>
<dd><p>This command declares the presence of a <i class="term">gh-pages</i> branch in the
repository, as is used by, for example, <a href="http://github.com">http://github.com</a>, to
manage the web-site for a project in the rpeository of the project.</p>
<p>The command confirms the presence of documentation and that the
local repository is <b class="syscmd">git</b>-based. If neither is true nothing
done.</p>
<p>While this command can be invoked multiple times, only the
first invokation will have an effect. Every invokation after that is
ignored.
It runs the command <b class="cmd">kettle doc</b> command implicitly, with the
default paths, to ensure that its own check for documentation work
properly.
This means that if documentation is stored in a non-standard location
<b class="cmd">kettle doc</b> must be run explicitly before this command, with
the proper path.</p>
<p>When the above tests pass the command will define a recipe
named <b class="const">gh-pages</b>, which performs all the automatable steps to
copy the embedded documentation of the project into its
<i class="term">gh-pages</i> branch. Afterward the checkout is left at the
<i class="term">gh-pages</i> branch, for the user to review and commit. While the
last step could be automated the review cannot, making the point moot.</p></dd>
<dt><a name="9"><b class="cmd">kettle testsuite</b> <span class="opt">?<i class="arg">testroot</i>?</span></a></dt>
<dd><p>This command declares the presence of a <b class="package">tcltest</b>-based
testsuite under the directory <i class="arg">testroot</i>, which is a path relative
to the source directory.</p>
<p>If not specified <i class="arg">testroot</i> defaults to &quot;<b class="file">tests</b>&quot;.</p>
<p>While this command can be invoked multiple times, only the
first invokation will have an effect. Every invokation after that is
ignored.
The commands <b class="cmd">kettle tcl</b> and <b class="cmd">kettle critcl3</b>) run this
command implicitly, with the default paths.
This means that if a testsuite is stored in a non-standard location
<b class="cmd">kettle testsuite</b> must be run explicitly before them, with the
proper path.</p>
<p>The package testsuite directory is scanned to locate the test
files. They are recognized by containing the marker string</p>
<ul class="itemized">
<li><p>&quot;<b class="const">tcl.tk//DSL tcltest//EN//</b>&quot;</p></li>
</ul>
<p>in their first 1024 characters.</p>
<p>When testsuites are found the command will define a recipe to
run them. This recipe will recursively invoke the recipes &quot;debug&quot; (or
&quot;install&quot; if the former does not exist, or fails) before performing
the tests, installing the package under test (and its dependencies) in
a local directory for use by the testsuites. The supporting commands
provided by kettle (see <i class="term"><a href="kettle_test.html">Kettle - Testsuite Support</a></i>) know how
to use this.</p>
<dl class="definitions">
<dt><b class="const">test</b></dt>
<dd></dd>
</dl>
<p>The verbosity of testsuite output to the terminal is specified
by the option <b class="option">--log-mode</b>.
The ability to save testsuite output to a series of files is specified
by the option <b class="option">--log</b>.
The tclsh shell used for running the testsuites is specified by option
<b class="option">--with-shell</b>.</p>
<dl class="options">
<dt><b class="option">--log-mode</b> compact|full</dt>
<dd><p>An option for recipe 'test', if defined. Its value determines the
verbosity of test suite information printed to the terminal or log window.</p>
<p>The default is <b class="const">compact</b>.</p></dd>
<dt><b class="option">--log</b> path</dt>
<dd><p>An option for recipe 'test', if defined. Its value is the path &quot;stem&quot;
for a series of files testsuite information is saved into. The actual
files use the specified stem and add their specifc file extension to
it.</p>
<p>The default is the empty string, disabling the saving of
testsuite information.</p></dd>
<dt><b class="option">--with-shell</b> path</dt>
<dd></dd>
</dl></dd>
</dl>
</div>
<div id="section3" class="section"><h2><a name="section3">License</a></h2>
<p>This package, written by Andreas Kupries, is BSD licensed.</p>
</div>
<div id="section4" class="section"><h2><a name="section4">Bugs, Ideas, Feedback</a></h2>
<p>This document, and the package it describes, will undoubtedly contain
bugs and other problems.
Please report such at the
<a href="https://chiselapp.com/user/andreas_kupries/repository/Kettle/index">Kettle Tracker</a>.
Please also report any ideas for enhancements you may have for either
package and/or documentation.</p>
</div>
<div id="keywords" class="section"><h2><a name="keywords">Keywords</a></h2>
<p><a href="../../index.html#key0">build tea</a></p>
</div>
<div id="category" class="section"><h2><a name="category">Category</a></h2>
<p>Build support</p>
</div>
</div></body></html>
